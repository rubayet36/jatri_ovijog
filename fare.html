<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Jatri Ovijog ‚Äì Calculate Fare</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Styles -->
  <link rel="stylesheet" href="./css/fare.css" />
  <link rel="stylesheet" href="./css/navbar.css" />

  <!-- Leaflet (map) -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />
</head>
<body>

<header class="full-navbar">
  <div class="nav-left">
    <span class="brand-title">Jatri_Ovijog</span>
  </div>

  <button class="nav-toggle" aria-label="Toggle navigation">
    <span></span>
    <span></span>
    <span></span>
  </button>

  <nav class="nav-pill" id="nav-pill">
    <div class="nav-slider" id="nav-slider"></div>

    <a href="dashboard.html" class="nav-pill-link" data-page="dashboard">
      <span>Dashboard</span>
      <span class="nav-pill-badge">4</span>
    </a>

    <a href="feed.html" class="nav-pill-link" data-page="feed">
      <span>Community</span>
    </a>

    <a href="report.html" class="nav-pill-link" data-page="report">
      <span>Report</span>
    </a>

    <a href="emergency.html" class="nav-pill-link" data-page="emergency">
      <span>Emergency</span>
    </a>
  </nav>

  <div class="nav-right">
 
    <button class="nav-icon-btn" id="profile-btn">üë§</button>
    <button class="nav-icon-btn" id="logout-btn">‚éã</button>
  </div>
</header>

<main class="fare-main">
  <section class="fare-header">
    <div>
      <h1>Calculate Fare</h1>
      <p>
        Pick your start and end points on the map to estimate local bus fare in Dhaka.
      </p>
    </div>
    <div class="fare-header-badge">
      üßÆ Uses official fare rules (you‚Äôll wire exact values from your PDF).
    </div>
  </section>

  <section class="fare-layout">
    <!-- Map -->
    <section class="fare-card map-card">
      <h2 class="card-title">Route Map</h2>
      <p class="map-help">
        Click on the map to set <strong>From</strong> and <strong>To</strong> points,
        or use your current location as the starting point.
      </p>
      <div class="map-toolbar">
        <button id="btnUseCurrent" class="ghost-cta">üìç Use my location as From</button>
        <button id="btnClear" class="ghost-cta">‚úñ Clear points</button>
      </div>
      <div id="fareMap"></div>
    </section>

    <!-- Info / Fare / Safety -->
    <section class="fare-card info-card">
      <h2 class="card-title">Fare Details & Safety</h2>

      <div class="field">
        <label>From</label>
        <div class="pill-field" id="fromLabel">Not selected</div>
      </div>

      <div class="field">
        <label>To</label>
        <div class="pill-field" id="toLabel">Not selected</div>
      </div>

      <div class="field-grid">
        <div class="field">
          <label>Distance</label>
          <div class="pill-field" id="distanceLabel">-- km</div>
        </div>
        <div class="field">
          <label>Estimated Fare</label>
          <div class="pill-field highlight" id="fareLabel">-- ‡ß≥</div>
        </div>
      </div>

      <!-- Safety lens -->
      <div class="field safety-block">
        <label for="routePreset">Route (optional, for safety score)</label>
        <select id="routePreset" class="pill-select">
          <option value="">Select a known route</option>
          <option value="Uttara ‚Üí Motijheel">Uttara ‚Üí Motijheel</option>
          <option value="Mirpur-10 ‚Üí Motijheel">Mirpur-10 ‚Üí Motijheel</option>
          <option value="Gabtoli ‚Üí Jatrabari">Gabtoli ‚Üí Jatrabari</option>
        </select>
      </div>

      <div class="field-grid safety-metrics">
        <div class="field">
          <label>Safety score</label>
          <div class="pill-field" id="safetyScoreLabel">--</div>
        </div>
        <div class="field">
          <label>Top issues</label>
          <div class="pill-field" id="safetyIssuesLabel">--</div>
        </div>
      </div>

      <p class="safety-time" id="safetyTimeLabel">
        Choose a route above to see when most complaints occur.
      </p>

      <div class="fare-breakdown">
        <h3>Fare Breakdown</h3>
        <p id="fareBreakdownText">
          Select a route to see calculation.
        </p>
      </div>

      <p class="fare-note">
        This is a front-end demo. Once your Spring Boot backend is ready,
        you can move the exact PDF-based logic there and return the fare & safety.
      </p>
    </section>
  </section>
</main>

<!-- Scripts -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="./js/navbar.js"></script>
<script src="./js/fare.js"></script>
</body>
</html>
